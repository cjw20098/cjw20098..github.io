<!DOCTYPE html>
<html lang="en">




<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  
      <title>Search - Hexo</title>
  

  
  
  <meta name="description" content="">
  <meta name="author" content="Jrian Chen">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- load loadjs.js -->
  <script src="/libs/loadjs/dist/loadjs.min.js"></script>

  <!-- load lightgallery -->
<link rel="stylesheet" href="/css/lightgallery.css">
<link rel="stylesheet" href="/libs/noty/lib/noty.css">
<script
src="https://code.jquery.com/jquery-3.3.1.min.js"
integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
crossorigin="anonymous"></script>
  






    <link rel="stylesheet" href="/css/taurus.css">
    
        <link rel="stylesheet" href="/css/scheme-taurus/animations.css">
    


 

  <!-- load font awesome 5 -->
  <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>

  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
  </script>
  <!-- load mathjax -->
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax//libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>

  <!-- load js-cookie -->
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <script src="/js/social-share.min.js"></script>
    <script src="/js/theme.js"></script>

  <!-- include cookie.js -->
  
  

  <!-- include comment system code -->
  
    <script src="//cdn1.lncld.net/static/js/3.6.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
  
  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="/images/favicon.png">
</head>
<body style="display: flex; flex-direction: column; min-height: 100vh;">

 

<header id="header" class='header'>
	<div class="header-title">
		
		<div class='header-logo'>
			<a href='/'>
				<img src='/images/theme-icon.svg' />
			</a>
		</div>
		<div class='header-text'>
			<h1>
				<a href="/">Hexo</a>
			</h1>
			<subtitle>
				
			</subtitle>
		</div>
		
	</div>
	<div id='header-nav'>
		



<nav id="nav">
	
	
	
	<div class='nav-item' id='nav-item-archive'>
		
				<div class='nav-icon'>
				
			<a href="/archives/" title='Archives'>
			<img src="/images/icons/blue-line/archive.svg" alt="">
			</a>
		</div>
	</div>
	<div class='nav-item' id='nav-item-search'>
		
		<div class='nav-icon active_dot'>
		
			<a href="/search/" title='Search'>
			<img src="/images/icons/blue-line/search.svg" alt="">
			</a>
		</div>
	</div>
	<div class="nav-item" id='nav-item-more'>
		<div class="nav-icon">
				<a href='#' onclick='onClickMenuIcon(event);' ontouchstart='onClickMenuIcon(event);'>
				<img src="/images/icons/blue-line/menu.svg" alt="">
				</a>
		</div>
		<div class="nav-more-menu">
		
		
	</div>
	</div>
</nav>

	</div>
</header>

 




  <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div style="flex: 1;">
      <div class='search-container'>
	<input type="text" id='search-form'>

	<ul class="cat-list">
		
	</ul>

	<div class='tag-cloud'>
		<a href="/tags/docker-linux-nginx-https-gitlab/" style="font-size: 0.8em; color: #488baf">docker linux nginx https gitlab</a>
	</div>
	<div class="archive-cards">
			<div class='Card-archive' style='display:none'>
				<div class="Card-body">
					<h3 class='Card-title'>
						<a>
						</a>
					</h3>
					<div class="Card-meta">
						<ul>
							<li><i class='fa fa-calendar'></i> <span class='Card-date'></span></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
</div>

<script src="/libs/fuse.js/dist/fuse.min.js"></script>
<script>
	var options = {
		shouldSort: true,
		threshold: 0.4,
		tokenize: true,
		location: 0,
		distance: 100,
		maxPatternLength: 32,
		minMatchCharLength: 2,
		keys: [
			"title",
			"author",
			"tags"
		]
	};
	var s = '[{"title":"安装基于docker的gitlab中文社区版","date":"2018-05-25T01:42:59.000Z","content":"\nDocker 要求 CentOS 系统的内核版本高于 3.10 ，查看本页面的前提条件来验证你的CentOS 版本是否支持 Docker 。通过 uname -r 命令查看你当前的内核版本1uname -r\ncentos7.2版本\n3.10.0-514.26.2.el7.x86_64\n一、首先安装docker１、初步安装和启动docker123yum update -yyum -y install dockersystemctl start docker\n２、设置镜像1234vi /etc/docker/daemon.json&#123;  &quot;registry-mirrors&quot;: [&quot;https://aj2rgad5.mirror.aliyuncs.com&quot;]&#125;\n３、开放管理端口映射1234567vi /lib/systemd/system/docker.service将第11行的ExecStart=/usr/bin/dockerd，替换为：ExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock -H tcp://0.0.0.0:76542375是管理端口，7654是备用端口在~/.bashrc中写入docker管理端口export DOCKER_HOST=tcp://0.0.0.0:2375source ~/.bashrc\n４、重启docker并查看docker版本123systemctl daemon-reloadsystemctl restart docker.servicedocker version\n５、测试docker是否正常安装和运行1docker run hello-world\n６、查看结果12Hello from Docker!This message shows that your installation appears to be working correctly.\n７、启动并加入开机启动12$ sudo systemctl start docker$ sudo systemctl enable docker\n８、安装时报错或因之前安装过旧版本docker12345Transaction check error:file /usr/bin/docker from install of docker-ce-17.12.0.ce-1.el7.centos.x86_64 conflicts with file from package docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64file /usr/bin/docker-containerd from install of docker-ce-17.12.0.ce-1.el7.centos.x86_64 conflicts with file from package docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64file /usr/bin/docker-containerd-shim from install of docker-ce-17.12.0.ce-1.el7.centos.x86_64 conflicts with file from package docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64file /usr/bin/dockerd from install of docker-ce-17.12.0.ce-1.el7.centos.x86_64 conflicts with file from package docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64\n９、卸载旧版本的包，再次安装docker12sudo yum erase　docker-common-2:1.12.6-68.gitec8512b.el7.centos.x86_64sudo yum install docker-ce\n二、安装nginx１、查看CentOS的版本123使用一下命令来查看一下当前系统的版本[root@localhost ~]# cat /etc/redhat-releaseCentOS Linux release 7.2.1511 (Core)\n2、查看CentOS的版本12345678910在 CentOS 系统上安装 Nginx ，你得先去添加一个资源库，像这样：vim /etc/yum.repos.d/nginx.repo使用vim命令去打开 /etc/yum.repos.d/nginx.repo,如果nginx.repo不存在，就会去创建一个这样的文件，打开以后按一下小键,进入编辑模式,然后复制粘贴下面这几行代码，完成以后按 esc 键退出，再输入:wq （保存并退出）[nginx]name=nginx repobaseurl=http://nginx.org/packages/centos/$releasever/$basearch/gpgcheck=0enabled=1\n3、yum 命令去安装 nginx，且需要安装SSL模块123完成上边操作以后，我们就可以使用 yum 命令去安装 nginx了yum updateyum -y install gcc gcc-c++ make automake autoconf libtool zlib zlib-devel openssl openssl-devel pcre pcre-devel\n在这里下载nginxwen’d’ban，下载的文件放在/usr/local解压，cd进入解压后的文件夹，执行以下命令12./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcremake -j 128 &amp;&amp; make install\n4、安装完成1234567891011121314151617181920212223242526272829303132333435363738394041Loaded plugins: fastestmirror, langpacksnginx                          | 2.9 kB   00:00   nginx/7/x86_64/primary_db                 | 14 kB  00:01   Loading mirror speeds from cached hostfile * base: mirrors.sina.cn * extras: mirrors.btte.net * updates: mirrors.sina.cnResolving Dependencies--&gt; Running transaction check---&gt; Package nginx.x86_64 1:1.10.1-1.el7.ngx will be installed--&gt; Finished Dependency ResolutionDependencies Resolved================================================================================ Package    Arch      Version            Repository   Size================================================================================Installing: nginx     x86_64     1:1.10.1-1.el7.ngx      nginx     640 kTransaction Summary================================================================================Install 1 PackageTotal download size: 640 kInstalled size: 2.1 MIs this ok [y/d/N]: yDownloading packages:nginx-1.10.1-1.el7.ngx.x86_64.rpm             | 640 kB  00:27   Running transaction checkRunning transaction testTransaction test succeededRunning transaction Installing : 1:nginx-1.10.1-1.el7.ngx.x86_64               1/1 ----------------------------------------------------------------------Thanks for using nginx!Please find the official documentation for nginx here:* http://nginx.org/en/docs/Commercial subscriptions for nginx are available on:* http://nginx.com/products/---------------------------------------------------------------------- Verifying : 1:nginx-1.10.1-1.el7.ngx.x86_64               1/1 Installed: nginx.x86_64 1:1.10.1-1.el7.ngx                        Complete!\n5、测试nginx配置文件123456当你执行 nginx -t 得时候,nginx会去测试你得配置文件得语法,并告诉你配置文件是否写得正确,同时也告诉了你配置文件得路径：nginx -t打印如下：nginx: the configuration file /etc/nginx/nginx.conf syntax is oknginx: configuration file /etc/nginx/nginx.conf test is successful说明配置文件成功！\n6、配置nginx假如你已经申请到了https证书,而且有nginx下的版本，通常是两个文件,一个是.key后缀的文件,为证书的私钥,另一个是.pem后缀的文件,为证书的公钥。\n1234567891011121314151617181920212223242526nginx.conf 配置如下：        upstream 主机域名 &#123;       server 主机IP:port;    &#125;    # HTTPS server    #    server &#123;        listen       443 ssl;        server_name  主机域名;        ssl_certificate      /usr/local/nginx/cert/20180111.pem;        ssl_certificate_key  /usr/local/nginx/cert/20180111.key;        ssl_session_cache    shared:SSL:1m;        ssl_session_timeout  5m;        ssl_ciphers  HIGH:!aNULL:!MD5;        ssl_prefer_server_ciphers  on;        location / &#123;\t    proxy_pass   http://主机域名;            root   html;            index  index.html index.htm;        &#125;    &#125;\n\n如果要让用户用http协议访问时自动跳转https，则还需加上如下配置：12345server &#123;     listen 80;     server_name www.server.com;     rewrite ^(.*)$ https://www.server.com; &#125;\n\n\n就是一个url重写而已,注意要把www.server.com改成你实际的主机名。配置完后，用如下命令测试下配置文件有没有错误。如果没有错误，用如下命令12nginx -t //查看配置是否正确nginx -s reload //服务重启\n\n\n重启nginx，然后用浏览器测试下用https协议能否正常访问服务器。 如果不能访问，请确认下证书路径有没有问题\n\n7、开启服务器的防火墙123456789开通443端口firewall-cmd --zone=public --add-port=443/tcp --permanent确认是否开通firewall-cmd --list-ports //如果可以看到443/tcp字样就说明开通了重新加载下防火墙配置firewall-cmd --reload执行完该步骤，大多数服务器应该可以正常用https协议访问。\n8、阿里云服务器123需要该步骤的原因是因为云服务器的安全组规则上没有开通相关的端口。操作步骤：云服务器ECS----&gt;安全组----&gt;配置规则----&gt;添加安全组规则\n注：以前是宿主机安装nginx,当然也可以用docker版的nginx，不过需要将配置文件和日志进行挂载三、安装gitlab中文社区版1、先查看docker版本以及状态1sudo docker version\n 应该会显示类似下面这样的信息。Docker客户端的版本最好在1.10以上。12345678910111213141516Client: Version:      1.13.1 API version:  1.26 Go version:   go1.7.5 Git commit:   092cba3727 Built:        Sun Feb 12 02:40:56 2017 OS/Arch:      linux/amd64Server: Version:      1.13.1 API version:  1.26 (minimum version 1.12) Go version:   go1.7.5 Git commit:   092cba3727 Built:        Sun Feb 12 02:40:56 2017 OS/Arch:      linux/amd64 Experimental: false\n2、下载gitlab社区中文版镜像1sudo docker pull beginor/gitlab-ce:10.7.3-ce.0\n3、启动gitlab\n用下面的命令启动一个默认配置的Gitlab。如果我们只在本机测试使用的话，将hostname替换为localhost。如果需要让外部系统也能访问的话使用外网IP地址。123456789docker run \\--detach \\--publish 8443:443 --publish 8888:80 --publish 2201:22 \\--name gitlab \\--restart unless-stopped \\--volume /srv/gitlab/config:/etc/gitlab \\--volume /srv/gitlab/logs:/var/log/gitlab \\--volume /srv/gitlab/data:/var/opt/gitlab \\beginor/gitlab-ce:10.7.3-ce.0\n\n首次启动可能比较慢，需要等待一分钟左右的时间。我们可以使用sudo docker ps命令查看当前所有Docker容器的状态。当它的状态由starting变为运行时间时，说明成功启动了。我们直接使用上面配置的IP地址（如localhost）在浏览器中访问即可。\n初次使用需要我们创建默认管理员密码，随便指定一个就行了。然后我们需要注册一个普通用户。以后的使用方法和Github这样的工具很相似了。\n4、配置gitlab123456gitlab默认密码sudo chmod -R o+x /var/opt/gitlab/gitlab-railsUsername: rootPassword: 5iveL!fe 修改gitlab配置文件vim /etc/gitlab/gitlab.rb\n5、修改密码12345以docker方式启动的，先执行docker exec -it &lt;容器id&gt;bash进入容器之中。gitlab-rails consoleuser = User.where(username: ‘root’).firstuser.password = ‘password’user.save!\n","tags":["docker linux nginx https gitlab"],"path":"2018/05/25/安装基于docker的gitlab中文社区版/","external_link":""},{"title":"Hello World","date":"2017-10-28T00:39:58.000Z","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick StartCreate a new post1$ hexo new My New Post\nMore info: Writing\nRun server1$ hexo server\nMore info: Server\nGenerate static files1$ hexo generate\nMore info: Generating\nDeploy to remote sites1$ hexo deploy\nMore info: Deployment\n","tags":[],"path":"2017/10/28/hello-world/","external_link":""},{"title":"“你好，CDN”","date":"2018-05-21T15:45:42.000Z","content":"一、什么是CDN？CDN全称Content Delivery Network，即内容分发网络。其基本思路是尽可能避开互联网上有可能影响数据传输速度和稳定性的瓶颈和环节，使内容传输的更快、更稳定。\n通过在网络各处放置节点服务器所构成的在现有的互联网基础之上的一层智能虚拟网络，CDN系统能够实时地根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上。其目的是使用户可就近取得所需内容，解决 Internet网络拥挤的状况，提高用户访问网站的响应速度。\n在不同地域的用户访问网站的响应速度存在差异,为了提高用户访问的响应速度、优化现有Internet中信息的流动,需要在用户和服务器间加入中间层CDN. 使用户能以最快的速度，从最接近用户的地方获得所需的信息，彻底解决网络拥塞，提高响应速度，是目前大型网站使用的流行的应用方案.\n二、传统的网络访问形式为：由上图可见，用户访问未使用CDN缓存网站的过程为:\n1用户向浏览器提供要访问的域名；\n2浏览器调用域名解析函数库对域名进行解析，以得到此域名对应的IP地址；3浏览器使用所得到的IP地址，域名的服务主机发出数据访问请求；4浏览器根据域名主机返回的数据显示网页的内容。通过以上四个步骤，浏览器完成从用户处接收用户要访问的域名到从域名服务主机处获取数据的整个过程。CDN网络是在用户和服务器之间增加Cache层，如何将用户的请求引导到Cache上获得源服务器的数据，主要是通过接管DNS实现，下面让我们看看访问使用CDN缓存后的网站的过程：\n三、使用CDN的访问形式对于CDN客户来说，不需要改动网站架构，只需要修改自己的DNS解析，设置一个CNAME指向CDN服务商即可。原理在下面会解释通过上图，我们可以了解到，使用了CDN缓存后的网站的访问过程变为：\n用户向浏览器提供要访问的域名；浏览器调用域名解析库对域名进行解析，由于CDN对域名解析过程进行了调整，所以解析函数库得到的是该域名对应的CNAME记录（由于现在已经是使用了CDN服务，CNAME为CDN服务商域名），为了得到实际IP地址，浏览器需要再次对获得的CNAME域名进行解析以得到实际的IP地址；在此过程中，使用的全局负载均衡DNS解析，如根据地理位置信息解析对应的IP地址，使得用户能就近访问。（CDN服务来提供最近的机器）此次解析得到CDN缓存服务器的IP地址，浏览器在得到实际的IP地址以后，向缓存服务器发出访问请求；缓存服务器根据浏览器提供的要访问的域名，通过Cache内部专用DNS解析得到此域名的实际IP地址，再由缓存服务器向此实际IP地址提交访问请求；缓存服务器从实际IP地址得得到内容以后，一方面在本地进行保存，以备以后使用，二方面把获取的数据返回给客户端，完成数据服务过程；客户端得到由缓存服务器返回的数据以后显示出来并完成整个浏览的数据请求过程。\n四、CDN关键技术\n\n缓存算法[Squid]；2. 分发能力；3. 负载均衡[Nginx]（4. 基于DNS[BIND]）；5. 支持协议；缓存算法决定命中率、源服务器压力、POP节点存储能力\n\n分发能力取决于IDC能力和IDC策略性分布\n负载均衡（智能调度）决定最佳路由、响应时间、可用性、服务质量\n基于DNS的负载均衡以CNAME实现[to cluster]，智取最优节点服务，\n缓存点有客户端浏览器缓存、本地DNS服务器缓存\n缓存内容有DNS地址缓存、客户请求内容缓存、动态内容缓存\n支持协议如静动态加速（图片加速、https带证书加速）、下载加速、流媒体加速、企业应用加速、手机应用加速.\n五、谁需要CDN？既然CDN的核心作用是提高网络的访问速度，那么其用户也就是访问量很大的网站，例如ICP 、ISP、大型企业、电子商务网站和政府网站等。利用CDN技术，这些网站无需投资昂贵的各类服务器，设立分站点。通过采用CDN，CDN将负责信息传递工作，保证信息正常传输，而技术人员只需要维护网站内容，不需要考虑流量问题。这样，网站可保证用户得到更多的新业务，可以快速访问网络上的内容，获得更好的服务质量。\n举个例子来讲，对于访问量比较大，而被访问内容更新周期比较长的网站，如政府网站，用户往往进行大量的查询工作。这类网站比较适合采用CDN。还有，大家是否注意到，在所谓的宽带社区中，瓶颈是社区的对外出口。这样，如果采用CDN无疑对社区用户使用视频点播、网络教育等宽带应用提供了保证。\n六、CDN的不足任何一个新事物，在给现有模式带来改进的同时，也必然存在一定的局限，CDN也是这样。实时性不太好是CDN的致命缺陷。随着对CDN需求的逐渐升温，这一缺陷将得到改进，使来自于远程服务器的网络内容网页与复本服务器或缓存器中的网页保持同步。\n解决方法是在网络内容发生变化时将新的网络内容从服务器端直接传送到缓存器，或者当对网络内容的访问增加时将数据源服务器的网络内容尽可能实时地复制到缓存服务器。\n—————END—————\n","tags":[],"path":"2018/05/21/“你好，Hexo”/","external_link":""}]';
	s = s.replace(/\\n/g, "\\n")  
               .replace(/\\'/g, "\\'")
               .replace(/\\"/g, '\\"')
               .replace(/\\&/g, "\\&")
               .replace(/\\r/g, "\\r")
               .replace(/\\t/g, "\\t")
               .replace(/\\b/g, "\\b")
               .replace(/\\f/g, "\\f");
// remove non-printable and other non-valid JSON chars
	s = s.replace(/[\u0000-\u0019]+/g,""); 
	var list = JSON.parse(s);
	var fuse = new Fuse(list, options);
	var el = document.getElementById('search-form');
	var newBox = $('.Card-archive').first().clone();
	el.oninput = function(event){
		var searchText = el.value;
		var result = fuse.search(searchText);
		$('.archive-cards .Card-archive').remove();
		for(var i in result){
			var anotherBox = newBox.clone();
			var dateStr = new Date(result[i].date);
			anotherBox.css('display','flex');
			var url = "";
			if(result[i].external_link !== ""){
				url = result[i].external_link;
			}else{
				url = '/' + result[i].path;
			}
			
			anotherBox.find('.Card-title a').text(result[i].title).attr('href', url);
			anotherBox.find('.Card-date').text(dateStr.toDateString());
			anotherBox.appendTo('.archive-cards');
		}
	}
</script>

  </div>

  

<footer id='footer'>
    <div class='footer-copyright'>
        <div>
            <p> Copyright by <a href="">Jrian Chen </a> @ 2018</p>
            <p>Designed by: <i class="fas fa-paint-brush"></i> <a href="https://moober.cn">Moober</a> and <i class="fas fa-graduation-cap"></i> <a href="https://qutang.github.io">Qu Tang</a> &bull; Theme: <a href="https://qutang.github.io/cutie/">Cutie 2.0.8-Taurus</a> &bull; Powered by <a href="http://hexo.io">Hexo.</a></p>
        </div>
    </div>
    
    <div class='footer-social'>
        
    </div>
</footer>

  <br>

  <div id="footer-nav" class='footer-nav'>
		



<nav id="nav">
	
	
	
	<div class='nav-item' id='nav-item-archive'>
		
				<div class='nav-icon'>
				
			<a href="/archives/" title='Archives'>
			<img src="/images/icons/blue-line/archive.svg" alt="">
			</a>
		</div>
	</div>
	<div class='nav-item' id='nav-item-search'>
		
		<div class='nav-icon active_dot'>
		
			<a href="/search/" title='Search'>
			<img src="/images/icons/blue-line/search.svg" alt="">
			</a>
		</div>
	</div>
	<div class="nav-item" id='nav-item-more'>
		<div class="nav-icon">
				<a href='#' onclick='onClickMenuIcon(event);' ontouchstart='onClickMenuIcon(event);'>
				<img src="/images/icons/blue-line/menu.svg" alt="">
				</a>
		</div>
		<div class="nav-more-menu">
		
		
	</div>
	</div>
</nav>

	</div>

  



    







    <script src="/js/lightgallery.min.js"></script>
<script src="/js/lg-zoom.min.js"></script>
<script type='text/javascript'>
    $(document).ready(function() {
        $("#lightgallery").lightGallery(); 
        $(".article-content img").each(function(){
            console.log($(this).attr('src'))
            $(this).attr('data-src', $(this).attr('src')).lightGallery({
                selector: 'this'
            })
        });
    });
</script>








<!-- <script src="/js/post.js"></script> -->

<script src="/js/headroom.min.js"></script>

<script data-no-instant type='text/javascript'>

initHeadroom();

changeLayoutOnTouchScreen();

// 
</script>

<script type='text/javascript'>

  
</script>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>
</html>
